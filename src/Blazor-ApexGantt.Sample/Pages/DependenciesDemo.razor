@page "/dependencies-demo"
@using Blazor_ApexGantt.Components
@using Blazor_ApexGantt.Models

<PageTitle>Dependencies Demo</PageTitle>

<h1>ApexGantt Dependencies Demo</h1>
<p>Showcasing task dependencies and workflow relationships</p>

<div class="mb-4">
    <h3>Project Workflow with Dependencies</h3>
    <p class="text-muted">Dependencies are shown with arrows connecting related tasks</p>
    <ApexGantt Options="@dependenciesOptions" Tasks="@tasks" />
</div>

<div class="mt-4">
    <h4>Task Dependencies:</h4>
    <ul>
        <li><strong>Requirements:</strong> Depends on Project Planning</li>
        <li><strong>Design:</strong> Depends on Requirements</li>
        <li><strong>Backend Development:</strong> Depends on Design</li>
        <li><strong>Frontend Development:</strong> Depends on Design</li>
        <li><strong>API Integration:</strong> Depends on both Backend and Frontend</li>
        <li><strong>Testing:</strong> Depends on API Integration</li>
        <li><strong>Deployment:</strong> Depends on Testing</li>
        <li><strong>Documentation:</strong> Depends on Deployment</li>
    </ul>

    <h4 class="mt-3">Features:</h4>
    <ul>
        <li><strong>Arrow Color:</strong> Custom purple (#8b5cf6) for dependency arrows</li>
        <li><strong>View Mode:</strong> Week view for better visibility</li>
        <li><strong>Interactive:</strong> Drag and resize enabled</li>
    </ul>
</div>

@code {
    private GanttOptions dependenciesOptions = new()
    {
        Width = "100%",
        Height = "600px",
        ViewMode = "week",

        // Dependency Styling
        ArrowColor = "#8b5cf6",

        // Interactivity
        EnableToolbar = true,
        EnableTaskDrag = true,
        EnableTaskResize = true,

        // Visual styling
        BarBorderRadius = 5,
        RowHeight = 48,
        BarBackgroundColor = "#10b981"
    };

    private List<GanttTask> tasks = new()
    {
        new GanttTask
        {
            Id = "planning",
            Name = "Project Planning",
            StartTime = DateTime.Now,
            EndTime = DateTime.Now.AddDays(3),
            Progress = 100,
            Color = "#22c55e"
        },
        new GanttTask
        {
            Id = "requirements",
            Name = "Requirements Analysis",
            StartTime = DateTime.Now.AddDays(3),
            EndTime = DateTime.Now.AddDays(8),
            Progress = 90,
            Dependencies = new List<string> { "planning" },
            Color = "#3b82f6"
        },
        new GanttTask
        {
            Id = "design",
            Name = "System Design",
            StartTime = DateTime.Now.AddDays(8),
            EndTime = DateTime.Now.AddDays(15),
            Progress = 70,
            Dependencies = new List<string> { "requirements" },
            Color = "#6366f1"
        },
        new GanttTask
        {
            Id = "backend",
            Name = "Backend Development",
            StartTime = DateTime.Now.AddDays(15),
            EndTime = DateTime.Now.AddDays(28),
            Progress = 50,
            Dependencies = new List<string> { "design" },
            Color = "#8b5cf6"
        },
        new GanttTask
        {
            Id = "frontend",
            Name = "Frontend Development",
            StartTime = DateTime.Now.AddDays(15),
            EndTime = DateTime.Now.AddDays(28),
            Progress = 45,
            Dependencies = new List<string> { "design" },
            Color = "#a855f7"
        },
        new GanttTask
        {
            Id = "integration",
            Name = "API Integration",
            StartTime = DateTime.Now.AddDays(28),
            EndTime = DateTime.Now.AddDays(33),
            Progress = 30,
            Dependencies = new List<string> { "backend", "frontend" },
            Color = "#ec4899"
        },
        new GanttTask
        {
            Id = "testing",
            Name = "Testing & QA",
            StartTime = DateTime.Now.AddDays(33),
            EndTime = DateTime.Now.AddDays(40),
            Progress = 20,
            Dependencies = new List<string> { "integration" },
            Color = "#f59e0b"
        },
        new GanttTask
        {
            Id = "deployment",
            Name = "Production Deployment",
            StartTime = DateTime.Now.AddDays(40),
            EndTime = DateTime.Now.AddDays(42),
            Progress = 0,
            Dependencies = new List<string> { "testing" },
            Color = "#ef4444"
        },
        new GanttTask
        {
            Id = "documentation",
            Name = "Documentation",
            StartTime = DateTime.Now.AddDays(42),
            EndTime = DateTime.Now.AddDays(45),
            Progress = 0,
            Dependencies = new List<string> { "deployment" },
            Color = "#06b6d4"
        }
    };
}
